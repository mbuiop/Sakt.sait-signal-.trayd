<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستم سیگنال‌دهی ارزهای دیجیتال</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding-bottom: 50px;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 2px solid var(--primary);
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(44, 62, 80, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            margin-bottom: 20px;
            color: var(--light);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .card-header {
            background: rgba(52, 152, 219, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-weight: bold;
            padding: 15px 20px;
            border-radius: 15px 15px 0 0 !important;
        }
        
        .form-control {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            direction: ltr;
        }
        
        .form-control:focus {
            background: rgba(0, 0, 0, 0.3);
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
            color: white;
        }
        
        .btn-primary {
            background: var(--primary);
            border: none;
            padding: 12px 30px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        
        .indicator-label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #3498db;
        }
        
        .signal-box {
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid transparent;
            transition: all 0.5s;
        }
        
        .buy-signal {
            border-color: var(--success);
            background: rgba(46, 204, 113, 0.15);
            animation: pulseBuy 2s infinite;
        }
        
        .sell-signal {
            border-color: var(--danger);
            background: rgba(231, 76, 60, 0.15);
            animation: pulseSell 2s infinite;
        }
        
        @keyframes pulseBuy {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        
        @keyframes pulseSell {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
        
        .signal-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .signal-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .profit-loss {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        
        .profit-box, .loss-box {
            padding: 15px;
            border-radius: 10px;
            width: 45%;
        }
        
        .profit-box {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid var(--success);
        }
        
        .loss-box {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid var(--danger);
        }
        
        .indicator-value {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            margin-top: 5px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .indicator-row {
            margin-bottom: 15px;
        }
        
        .indicator-description {
            font-size: 12px;
            color: #bdc3c7;
            margin-top: 5px;
        }
        
        .strength-meter {
            height: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .strength-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .weight-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--warning);
            color: var(--dark);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }
        
        .indicator-container {
            position: relative;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .indicator-row > div {
                margin-bottom: 15px;
            }
            
            .profit-loss {
                flex-direction: column;
            }
            
            .profit-box, .loss-box {
                width: 100%;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1><i class="fas fa-chart-line"></i> سیستم سیگنال‌دهی هوشمند ارزهای دیجیتال</h1>
                    <p class="lead">با وارد کردن مقادیر اندیکاتورها از چارت صرافی، سیگنال‌های معاملاتی دقیق دریافت کنید</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-calculator"></i> مقادیر اندیکاتورها را وارد کنید
                    </div>
                    <div class="card-body">
                        <div class="row indicator-row">
                            <div class="col-md-3 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">20%</div>
                                <div class="indicator-label">قیمت فعلی ارز</div>
                                <input type="number" class="form-control" id="currentPrice" placeholder="مثال: 8660">
                                <div class="indicator-description">قیمت فعلی ارز در بازار</div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">15%</div>
                                <div class="indicator-label">سطح حمایت</div>
                                <input type="number" class="form-control" id="support" placeholder="مثال: 8400">
                                <div class="indicator-description">سطح حمایت کلیدی</div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">15%</div>
                                <div class="indicator-label">سطح مقاومت</div>
                                <input type="number" class="form-control" id="resistance" placeholder="مثال: 8900">
                                <div class="indicator-description">سطح مقاومت کلیدی</div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">10%</div>
                                <div class="indicator-label">شاخص قدرت نسبی (RSI)</div>
                                <input type="number" class="form-control" id="rsi" placeholder="0-100" min="0" max="100">
                                <div class="indicator-description">محدوده 0 تا 100</div>
                            </div>
                        </div>
                        
                        <div class="row indicator-row">
                            <div class="col-md-4 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">10%</div>
                                <div class="indicator-label">میانگین متحرک 5 دوره (EMA5)</div>
                                <input type="number" class="form-control" id="ema5" placeholder="مثال: 8600">
                                <div class="indicator-description">میانگین متحرک کوتاه مدت</div>
                            </div>
                            <div class="col-md-4 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">15%</div>
                                <div class="indicator-label">میانگین متحرک 10 دوره (EMA10)</div>
                                <input type="number" class="form-control" id="ema10" placeholder="مثال: 8500">
                                <div class="indicator-description">میانگین متحرک میان مدت</div>
                            </div>
                            <div class="col-md-4 col-sm-6 mb-3 indicator-container">
                                <div class="weight-badge">15%</div>
                                <div class="indicator-label">میانگین متحرک 20 دوره (EMA20)</div>
                                <input type="number" class="form-control" id="ema20" placeholder="مثال: 8300">
                                <div class="indicator-description">میانگین متحرک بلند مدت</div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button id="calculateBtn" class="btn btn-primary btn-lg">
                                <i class="fas fa-bolt"></i> محاسبه سیگنال
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-lightbulb"></i> سیگنال معاملاتی
                    </div>
                    <div class="card-body">
                        <div id="signalResult" class="signal-box">
                            <div class="signal-title">در انتظار محاسبه...</div>
                            <p>لطفاً مقادیر اندیکاتورها را وارد کرده و دکمه "محاسبه سیگنال" را بزنید</p>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-4">
                                <div class="indicator-value">قیمت ورود: <span id="entryPrice">---</span></div>
                            </div>
                            <div class="col-md-4">
                                <div class="indicator-value">حد سود: <span id="takeProfit">---</span></div>
                            </div>
                            <div class="col-md-4">
                                <div class="indicator-value">حد ضرر: <span id="stopLoss">---</span></div>
                            </div>
                        </div>
                        
                        <div class="profit-loss mt-4">
                            <div class="profit-box">
                                <h5><i class="fas fa-arrow-up"></i> پتانسیل سود</h5>
                                <div id="profitPotential" class="signal-value">0%</div>
                                <div class="strength-meter">
                                    <div id="profitBar" class="strength-fill bg-success" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="loss-box">
                                <h5><i class="fas fa-arrow-down"></i> ریسک ضرر</h5>
                                <div id="lossRisk" class="signal-value">0%</div>
                                <div class="strength-meter">
                                    <div id="lossBar" class="strength-fill bg-danger" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-info-circle"></i> راهنمای سیستم
                    </div>
                    <div class="card-body">
                        <h5><i class="fas fa-weight"></i> وزن‌دهی اندیکاتورها:</h5>
                        <ul class="mt-3">
                            <li>قیمت فعلی ارز: <span class="badge bg-warning text-dark">20%</span></li>
                            <li>سطوح حمایت و مقاومت: <span class="badge bg-warning text-dark">15% هر کدام</span></li>
                            <li>میانگین‌های متحرک (EMA): <span class="badge bg-warning text-dark">10%-15%</span></li>
                            <li>شاخص قدرت نسبی (RSI): <span class="badge bg-warning text-dark">10%</span></li>
                        </ul>
                        
                        <h5 class="mt-4"><i class="fas fa-lightbulb"></i> منطق سیگنال‌دهی:</h5>
                        <p>سیستم با ترکیب هوشمندانه اندیکاتورها و سطوح کلیدی، سیگنال‌های زیر را تولید می‌کند:</p>
                        <ul>
                            <li><span class="text-success">سیگنال خرید قوی</span> (تمامی شرایط خرید فراهم باشد)</li>
                            <li><span class="text-success">سیگنال خرید</span> (اکثر شرایط خرید فراهم باشد)</li>
                            <li><span class="text-danger">سیگنال فروش قوی</span> (تمامی شرایط فروش فراهم باشد)</li>
                            <li><span class="text-danger">سیگنال فروش</span> (اکثر شرایط فروش فراهم باشد)</li>
                            <li><span class="text-warning">موقعیت خنثی</span> (عدم قطعیت در بازار)</li>
                        </ul>
                        
                        <h5 class="mt-4"><i class="fas fa-calculator"></i> نحوه محاسبه حد سود و ضرر:</h5>
                        <p>حدود سود و ضرر بر اساس:</p>
                        <ul>
                            <li>فاصله قیمت از سطوح حمایت و مقاومت</li>
                            <li>نوسان‌های اخیر بازار</li>
                            <li>نسبت ریسک به ریوارد (حداقل 1:2)</li>
                        </ul>
                        
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-exclamation-triangle"></i> <strong>توجه:</strong> این تحلیل‌ها صرفاً جنبه آموزشی دارند و مسئولیت معاملات بر عهده کاربر است.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="container">
            <p>سیستم سیگنال‌دهی هوشمند ارزهای دیجیتال | ترکیب ۷ اندیکاتور تخصصی بازار</p>
            <p>© 2023 تمامی حقوق محفوظ است</p>
        </div>
    </div>
    
    <script>
        document.getElementById('calculateBtn').addEventListener('click', function() {
            // دریافت مقادیر ورودی
            const currentPrice = parseFloat(document.getElementById('currentPrice').value) || 0;
            const support = parseFloat(document.getElementById('support').value) || 0;
            const resistance = parseFloat(document.getElementById('resistance').value) || 0;
            const rsi = parseFloat(document.getElementById('rsi').value) || 50;
            const ema5 = parseFloat(document.getElementById('ema5').value) || 0;
            const ema10 = parseFloat(document.getElementById('ema10').value) || 0;
            const ema20 = parseFloat(document.getElementById('ema20').value) || 0;
            
            // اعتبارسنجی داده‌ها
            if (currentPrice <= 0 || support <= 0 || resistance <= 0) {
                alert('لطفاً مقادیر معتبر برای قیمت، حمایت و مقاومت وارد کنید');
                return;
            }
            
            // محاسبه سیگنال‌ها با وزن‌دهی دقیق
            let buySignal = 0;
            let sellSignal = 0;
            
            // تحلیل قیمت فعلی نسبت به سطوح حمایت و مقاومت (وزن 35%)
            const priceWeight = 0.35;
            const supportDistance = (currentPrice - support) / currentPrice;
            const resistanceDistance = (resistance - currentPrice) / currentPrice;
            
            if (supportDistance < 0.02) { // کمتر از 2% از حمایت فاصله دارد
                buySignal += priceWeight * 0.8;
            } else if (supportDistance < 0.05) { // کمتر از 5% از حمایت فاصله دارد
                buySignal += priceWeight * 0.5;
            }
            
            if (resistanceDistance < 0.02) { // کمتر از 2% از مقاومت فاصله دارد
                sellSignal += priceWeight * 0.8;
            } else if (resistanceDistance < 0.05) { // کمتر از 5% از مقاومت فاصله دارد
                sellSignal += priceWeight * 0.5;
            }
            
            // تحلیل RSI (وزن 10%)
            const rsiWeight = 0.10;
            if (rsi < 30) {
                buySignal += rsiWeight;
            } else if (rsi > 70) {
                sellSignal += rsiWeight;
            } else if (rsi > 50) {
                buySignal += rsiWeight * 0.3;
            } else {
                sellSignal += rsiWeight * 0.3;
            }
            
            // تحلیل میانگین‌های متحرک (وزن 35%)
            const emaWeight = 0.35;
            const emaConditions = [];
            
            // بررسی EMA5 > EMA10 > EMA20 (روند صعودی)
            if (ema5 > ema10 && ema10 > ema20) {
                buySignal += emaWeight;
                emaConditions.push('صعودی قوی');
            } 
            // بررسی EMA5 < EMA10 < EMA20 (روند نزولی)
            else if (ema5 < ema10 && ema10 < ema20) {
                sellSignal += emaWeight;
                emaConditions.push('نزولی قوی');
            }
            // بررسی EMA5 > EMA10 و EMA10 > EMA20 (روند صعودی ضعیف)
            else if (ema5 > ema10) {
                buySignal += emaWeight * 0.6;
                emaConditions.push('صعودی');
            }
            // بررسی EMA5 < EMA10 و EMA10 < EMA20 (روند نزولی ضعیف)
            else if (ema5 < ema10) {
                sellSignal += emaWeight * 0.6;
                emaConditions.push('نزولی');
            }
            // شرایط خنثی
            else {
                buySignal += emaWeight * 0.2;
                sellSignal += emaWeight * 0.2;
                emaConditions.push('خنثی');
            }
            
            // تحلیل نهایی و تصمیم‌گیری
            const signalResult = document.getElementById('signalResult');
            const entryPriceElem = document.getElementById('entryPrice');
            const takeProfitElem = document.getElementById('takeProfit');
            const stopLossElem = document.getElementById('stopLoss');
            const profitPotentialElem = document.getElementById('profitPotential');
            const lossRiskElem = document.getElementById('lossRisk');
            const profitBar = document.getElementById('profitBar');
            const lossBar = document.getElementById('lossBar');
            
            // تنظیم قیمت ورود
            const entryPrice = currentPrice;
            entryPriceElem.textContent = entryPrice.toFixed(2);
            
            // محاسبه حد سود و ضرر
            let takeProfit, stopLoss, profitPotential, lossRisk;
            
            if (buySignal > sellSignal) {
                // محاسبات برای سیگنال خرید
                takeProfit = resistance * 0.98; // 2% پایین‌تر از مقاومت
                stopLoss = support * 0.97; // 3% پایین‌تر از حمایت
                
                profitPotential = ((takeProfit - entryPrice) / entryPrice * 100).toFixed(2);
                lossRisk = ((entryPrice - stopLoss) / entryPrice * 100).toFixed(2);
                
                // تعیین قدرت سیگنال خرید
                if (buySignal > 0.7) {
                    signalResult.className = 'signal-box buy-signal';
                    signalResult.innerHTML = `
                        <div class="signal-title"><i class="fas fa-arrow-up"></i> سیگنال خرید قوی</div>
                        <p>تمامی شرایط برای ورود به موقعیت خرید فراهم است</p>
                        <p>روند میانگین‌های متحرک: ${emaConditions.join('، ')}</p>
                    `;
                } else {
                    signalResult.className = 'signal-box buy-signal';
                    signalResult.innerHTML = `
                        <div class="signal-title"><i class="fas fa-arrow-up"></i> سیگنال خرید</div>
                        <p>شرایط برای ورود به موقعیت خرید مناسب است</p>
                        <p>روند میانگین‌های متحرک: ${emaConditions.join('، ')}</p>
                    `;
                }
            } else if (sellSignal > buySignal) {
                // محاسبات برای سیگنال فروش
                takeProfit = support * 1.02; // 2% بالاتر از حمایت
                stopLoss = resistance * 1.03; // 3% بالاتر از مقاومت
                
                profitPotential = ((entryPrice - takeProfit) / entryPrice * 100).toFixed(2);
                lossRisk = ((stopLoss - entryPrice) / entryPrice * 100).toFixed(2);
                
                // تعیین قدرت سیگنال فروش
                if (sellSignal > 0.7) {
                    signalResult.className = 'signal-box sell-signal';
                    signalResult.innerHTML = `
                        <div class="signal-title"><i class="fas fa-arrow-down"></i> سیگنال فروش قوی</div>
                        <p>تمامی شرایط برای ورود به موقعیت فروش فراهم است</p>
                        <p>روند میانگین‌های متحرک: ${emaConditions.join('، ')}</p>
                    `;
                } else {
                    signalResult.className = 'signal-box sell-signal';
                    signalResult.innerHTML = `
                        <div class="signal-title"><i class="fas fa-arrow-down"></i> سیگنال فروش</div>
                        <p>شرایط برای ورود به موقعیت فروش مناسب است</p>
                        <p>روند میانگین‌های متحرک: ${emaConditions.join('، ')}</p>
                    `;
                }
            } else {
                // شرایط خنثی
                takeProfit = 0;
                stopLoss = 0;
                profitPotential = 0;
                lossRisk = 0;
                
                signalResult.className = 'signal-box';
                signalResult.innerHTML = `
                    <div class="signal-title"><i class="fas fa-pause"></i> وضعیت خنثی</div>
                    <p>هیچ سیگنال واضحی در بازار وجود ندارد</p>
                    <p>روند میانگین‌های متحرک: ${emaConditions.join('، ')}</p>
                `;
            }
            
            // نمایش نتایج
            if (takeProfit > 0) takeProfitElem.textContent = takeProfit.toFixed(2);
            else takeProfitElem.textContent = '---';
            
            if (stopLoss > 0) stopLossElem.textContent = stopLoss.toFixed(2);
            else stopLossElem.textContent = '---';
            
            profitPotentialElem.textContent = profitPotential + '%';
            lossRiskElem.textContent = lossRisk + '%';
            
            // تنظیم نمودارهای پتانسیل سود و ریسک ضرر
            profitBar.style.width = Math.min(100, profitPotential) + '%';
            lossBar.style.width = Math.min(100, lossRisk) + '%';
        });
        
        // تنظیم مقادیر نمونه برای نمایش
        document.getElementById('currentPrice').value = 8660;
        document.getElementById('support').value = 8400;
        document.getElementById('resistance').value = 8900;
        document.getElementById('rsi').value = 65;
        document.getElementById('ema5').value = 8620;
        document.getElementById('ema10').value = 8550;
        document.getElementById('ema20').value = 8450;
    </script>
</body>
</html>